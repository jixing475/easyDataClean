---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# easyDataClean

<!-- badges: start -->
<!-- badges: end -->

The goal of easyDataClean is to ...


# Misc

## df_to_subsetList

è¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯æŒ‰ç…§è¡Œæ¥åˆ‡åˆ†æ•°æ®æ¡†, æ¯”å¦‚ 100 è¡Œçš„ df, æŒ‰ç…§æ¯äº”è¡Œæ¥åˆ‡åˆ†, å°±å¯ä»¥åˆ‡æˆ 20 ä¸ªå°çš„æ•°æ®æ¡†, å­˜æˆ list, æ–¹ä¾¿è°ƒç”¨ future_map å‡½æ•°æ¥è¿›è¡Œå¹¶è¡Œè®¡ç®—

æ€è·¯: group_by

input: ä½ æƒ³è¦åˆ‡åˆ†çš„å­æ•°æ®æ¡†æ•°ç›®
output: å«æœ‰ä¸€ç³»åˆ—ç»“æ„ç›¸åŒçš„å­æ•°æ®æ¡†çš„ list


```{r}
library(tidyverse)



  
  
  
df_to_subsetList <- function(df, group_num = 3) {
  
  df_list <- 
  df %>%
    dplyr::mutate(split_group = rep(
      1:group_num,
      each = nrow(.) / group_num,
      len = nrow(.)
    )) %>%
    
    
    dplyr::group_by(split_group) %>%
    tidyr::nest() %>%
    
    
    dplyr::select(split_group, data) %>%
    printy::super_split(split_group) %>%
    purrr::map(~ .x[["data"]][[1]])
  
  return(df_list)
}


iris %>% 
  df_to_subsetList(group_num = 4) 

```


## transfer

ä¸€ä¸ª R ç‰ˆæœ¬çš„åœ¨çº¿ä¼ è¾“å‡½æ•°

å…ˆçœ‹ä¸€ä¸‹ shell ç‰ˆæœ¬çš„

```{bash}

curl --upload-file demo.rds https://transfer.sh/`basename "demo.rds"` 
```

```{r}
df = iris



transfer.sh <- function(obj, type = "rds") {
  # type: rds or feather
  
  if (type == "rds"){
    tmp_file <- tempfile() %>% paste0(".rds")
    readr::write_rds(obj, tmp_file)
  } else {
    tmp_file <- tempfile() %>% paste0(".feather")
    arrow::write_feather(obj, tmp_file)
  }
  
  download_url <- 
  stringr::str_glue('curl --upload-file {tmp_file} https://transfer.sh/`basename "{tmp_file}"` ') %>%
    system(intern = TRUE)
  
  return(download_url)
}


df %>% 
  transfer.sh(type = "feather")

# df_new <- readr::read_rds("https://transfer.sh/saV5ft/file70602fa86c81.rds")



```










## ref

[easystats/datawizard: Magic potions to clean and transform your data ğŸ§™](https://github.com/easystats/datawizard)

